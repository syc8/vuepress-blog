### 性能优化

>分析性能指标，找到慢的原因
>
>对症下药，解决问题
>
>持续跟进，持续优化

#### 如果是网页加载慢

- 优化服务端硬件配置，使用CDN
- 路由懒加载，大组件异步加载—减少主包的体积
- 优化HTTP缓存策略

#### 网页渲染慢

- 优化服务端接口（如Ajax获取数据慢）

- 继续分析，优化前端组件内部的逻辑（参考Vue React 优化）
- 服务端渲染 SSR 

#### 持续跟进

- 性能优化是一个循序渐进的过程，不像bug一次性解决

- 持续跟进统计结果，再逐步分析性能瓶颈，持续优化

- 可使用第三方统计服务，如阿里云ARMS、百度统计

#### 全链路总结

##### 加载方面

1. http2:  首部回缩,多路复用等
2. http缓存利用 :  expires,  cache-Control & last-Modified,  Etag
3. http请求优化:  减少http请求, 如: 精妙图, 小的资源合并, 不常用的固定存放在localStrorage
4. DNS预解析:    提前缓存解析结果, 缩短解析时间
5. CDN加速:  cdn加速(就近站点),  缓存,
6. h5离线化:  本地离线包
7. 接口本地缓存
8. async, defer或动态script放在尾部
9. 路由懒加载

##### 渲染

1. 懒加载、预加载(proload, prefetch)、预渲染(prerender)：
2. 服务端渲染

##### 打包

- 压缩代码, 图片压缩
- Tree Shaking/Scope Hoisting
- 使用cdn加载第三方模块
- 多线程打包happypack
- splitChunks抽离公共文件
- sourceMap优化

##### 编码阶段

- 尽量减少data中的数据，data中的数据都会增加getter和setter，会收集对应的watcher
- v-if和v-for不能连用
- 如果需要使用v-for给每项元素绑定事件时使用事件代理
- SPA 页面采用keep-alive缓存组件
- 在更多的情况下，使用v-if替代v-show
- key保证唯一
- 使用路由懒加载、异步组件
- 防抖、节流
- 第三方模块按需导入
- 虚拟列表: 长列表滚动到可视区域动态加载
- 图片懒加载

##### 用户体验

- 骨架屏
- PWA

还可以使用缓存(客户端缓存、服务端缓存)优化、服务端开启gzip压缩等。

(优化是个大工程，会涉及很多方面，这里申请另开一个专栏)