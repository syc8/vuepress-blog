<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>promise.all | sansu-blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.9f84806b.css" as="style"><link rel="preload" href="/assets/js/app.220fcdf5.js" as="script"><link rel="preload" href="/assets/js/2.778bb4ad.js" as="script"><link rel="preload" href="/assets/js/1.50b457b8.js" as="script"><link rel="preload" href="/assets/js/28.ff559d07.js" as="script"><link rel="prefetch" href="/assets/js/10.325b9f09.js"><link rel="prefetch" href="/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/assets/js/12.ecdb524b.js"><link rel="prefetch" href="/assets/js/13.52087e05.js"><link rel="prefetch" href="/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/assets/js/16.85253907.js"><link rel="prefetch" href="/assets/js/17.c2838453.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/assets/js/21.33b300c9.js"><link rel="prefetch" href="/assets/js/22.b7c97fbe.js"><link rel="prefetch" href="/assets/js/23.3fe4f4e7.js"><link rel="prefetch" href="/assets/js/24.1b1a526d.js"><link rel="prefetch" href="/assets/js/25.c0c326b8.js"><link rel="prefetch" href="/assets/js/26.d196432d.js"><link rel="prefetch" href="/assets/js/27.0237ff6e.js"><link rel="prefetch" href="/assets/js/29.8ea4d81b.js"><link rel="prefetch" href="/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/assets/js/30.eb86d065.js"><link rel="prefetch" href="/assets/js/31.a0ccb169.js"><link rel="prefetch" href="/assets/js/32.84503ad3.js"><link rel="prefetch" href="/assets/js/33.ac4015e6.js"><link rel="prefetch" href="/assets/js/34.96388a70.js"><link rel="prefetch" href="/assets/js/35.69d0b815.js"><link rel="prefetch" href="/assets/js/36.467f6d59.js"><link rel="prefetch" href="/assets/js/37.63d0c8ba.js"><link rel="prefetch" href="/assets/js/38.b62fd785.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/5.7098d77a.js"><link rel="prefetch" href="/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/assets/js/7.6a854e57.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f84806b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">sansu-blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/2023专项复习/" class="nav-link">
  2023专项复习
</a></li><li class="dropdown-item"><!----> <a href="/interview/手写题/" class="nav-link">
  手写题
</a></li><li class="dropdown-item"><!----> <a href="/interview/输出打印题/" class="nav-link">
  输出打印题
</a></li><li class="dropdown-item"><!----> <a href="/interview/虚拟列表/" class="nav-link">
  虚拟列表
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题1/" class="nav-link">
  2020面试题1
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题2/" class="nav-link">
  2020面试题2
</a></li><li class="dropdown-item"><!----> <a href="/interview/覆盘/" class="nav-link">
  覆盘
</a></li><li class="dropdown-item"><!----> <a href="/interview/性能优化/" class="nav-link">
  性能优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">微信小程序</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">微信小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wechatmini/小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/01小程序_技术选型.html" class="nav-link">
  01小程序技术选型
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/02微信小程序-系统实践学习.html" class="nav-link">
  02原生微信小程序实践
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/WePY - 快速开发小程序.html" class="nav-link">
  WePY快速开发
</a></li></ul></div></div><div class="nav-item"><a href="/document/index/" class="nav-link">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/R/" class="nav-link">
  R
</a></li><li class="dropdown-item"><!----> <a href="/react/React+nextjs访问星/" class="nav-link">
  React+nextjs访问星
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/syc-xiaosu03" target="_self" class="nav-link external">
  github
  <!----></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/2023专项复习/" class="nav-link">
  2023专项复习
</a></li><li class="dropdown-item"><!----> <a href="/interview/手写题/" class="nav-link">
  手写题
</a></li><li class="dropdown-item"><!----> <a href="/interview/输出打印题/" class="nav-link">
  输出打印题
</a></li><li class="dropdown-item"><!----> <a href="/interview/虚拟列表/" class="nav-link">
  虚拟列表
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题1/" class="nav-link">
  2020面试题1
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题2/" class="nav-link">
  2020面试题2
</a></li><li class="dropdown-item"><!----> <a href="/interview/覆盘/" class="nav-link">
  覆盘
</a></li><li class="dropdown-item"><!----> <a href="/interview/性能优化/" class="nav-link">
  性能优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">微信小程序</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">微信小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wechatmini/小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/01小程序_技术选型.html" class="nav-link">
  01小程序技术选型
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/02微信小程序-系统实践学习.html" class="nav-link">
  02原生微信小程序实践
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/WePY - 快速开发小程序.html" class="nav-link">
  WePY快速开发
</a></li></ul></div></div><div class="nav-item"><a href="/document/index/" class="nav-link">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/R/" class="nav-link">
  R
</a></li><li class="dropdown-item"><!----> <a href="/react/React+nextjs访问星/" class="nav-link">
  React+nextjs访问星
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/syc-xiaosu03" target="_self" class="nav-link external">
  github
  <!----></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>promise.all</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#promise-all" class="sidebar-link">promise.all</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#promise-race手写" class="sidebar-link">promise.race手写</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#new关键字" class="sidebar-link">new关键字</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#节流防抖" class="sidebar-link">节流防抖</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#排序" class="sidebar-link">排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#冒泡排序" class="sidebar-link">冒泡排序</a></li><li class="sidebar-sub-header"><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#快速排序-o-n-logn" class="sidebar-link">快速排序 o(n*logn)</a></li></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#求数组中和为target的两个元素" class="sidebar-link">求数组中和为target的两个元素</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#千分位格式化" class="sidebar-link">千分位格式化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#数组形式" class="sidebar-link">数组形式</a></li><li class="sidebar-sub-header"><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#字符串形式" class="sidebar-link">字符串形式</a></li></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#旋转数组k步" class="sidebar-link">旋转数组K步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#旋转数组-k-步-使用pop-unshift" class="sidebar-link">旋转数组 k 步 - 使用pop unshift</a></li><li class="sidebar-sub-header"><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#旋转数组-k-步-使用concat" class="sidebar-link">旋转数组 k 步 - 使用concat</a></li></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#单向链表" class="sidebar-link">单向链表</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#翻转单项链表" class="sidebar-link">翻转单项链表</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#是否有效括号判断-利用栈先进后出" class="sidebar-link">是否有效括号判断(利用栈先进后出)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E6%89%8B%E5%86%99%E9%A2%98.html#异或运算符" class="sidebar-link">异或运算符</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="promise-all"><a href="#promise-all" class="header-anchor">#</a> promise.all</h2> <blockquote><p>返回是个promise, 携带有全部执行成功(数组), 或者最快执行失败的结果;</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">promiseAll</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// promise.all内部返回的也是promise</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;传入的不是一个数组&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">const</span> len <span class="token operator">=</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
       <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// promise.all最终执行结果返回是返回所有成功的结果的集合,亦或者是最先失败的结果</span>
       <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 记录已执行完成(成功)的数量, 判断结束时机</span>

       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                   counter<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 每成功自加1</span>
                   result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">;</span> <span class="token comment">// 存储当前结果</span>
                   <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">===</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                       <span class="token comment">// 当最后一个执行完, 改变为resolve状态,并返回结果</span>
                       <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
                   <span class="token punctuation">}</span>
               <span class="token punctuation">}</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 以下功能测试</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'p1--success'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'p2--success'</span><span class="token punctuation">)</span>
       <span class="token comment">// reject('p2--err')</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'p3--success'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">promiseAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">'promiseall-成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="promise-race手写"><a href="#promise-race手写" class="header-anchor">#</a> promise.race手写</h2> <blockquote><p>赛跑, 抢跑的逻辑, 不管是失败与成功, 最先执行完毕的返回, 并变更执行模板</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">promiseRace</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="new关键字"><a href="#new关键字" class="header-anchor">#</a> new关键字</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token parameter">Fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 创建新对象, 将新对象的原型链指向构造函数的原型对象</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 改变构造函数的this指向新对象的this</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 根据返回值判断, 是不是对象方式1:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'Object'</span> <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 根据返回值判断, 是不是对象方式2:</span>
    <span class="token comment">// if(result instanceof Object){</span>
    <span class="token comment">//    return result</span>
    <span class="token comment">// }</span>
    <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>
</code></pre></div><p>/** 1.防抖节流</p> <p>* 防抖: 减少连续执行次数, 防止高密集的执行(注重结果)</p> <p>* 节流: 控制执行频率, 使有节奏的执行(注重过程)</p> <p>*/</p> <h2 id="节流防抖"><a href="#节流防抖" class="header-anchor">#</a> 节流防抖</h2> <p>* 防抖: 减少连续执行次数, 防止高密集的执行(注重结果)</p> <p>* 节流: 控制执行频率, 使有节奏的执行(注重过程)</p> <p><strong>防抖</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    

  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

     <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>

       <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 有则先清除, 继续重新开始计时</span>

     <span class="token punctuation">}</span><span class="token punctuation">;</span>

     timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

       <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

       timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

     <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><strong>节流</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

     <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">;</span>   <span class="token comment">// 有则结束, 暂不触发执行</span>

     timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

       <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

       timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// 后清除</span>

     <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>



<span class="token punctuation">}</span>
</code></pre></div><h2 id="排序"><a href="#排序" class="header-anchor">#</a> 排序</h2> <h3 id="冒泡排序"><a href="#冒泡排序" class="header-anchor">#</a> 冒泡排序</h3> <p>要点:</p> <ol><li><strong>最后一个不用循环</strong> (因每层的都是当前的和下一个对比, 最后一个在倒数第二个已做对比)</li> <li>需要一个标志位 <code>flag</code>  用于<strong>判断当前这轮循环中元素是否产生了交换</strong>, 没有则代表已是有序, 需跳出循环<strong>结束排序</strong>;</li> <li>第二层循环 <code>j &lt; len - 1 - i</code> 是因为每次<strong>最后i个元素</strong>已经是排好序的了, 不管是升序还是降序, <strong>先排好</strong>的都<strong>在后面</strong>;</li> <li><code>[arr[j], arr[j+1]] = [arr[j+1], arr[j]]</code> 是利用解构赋值, 交换两个变量的位置:(对数组元素进行解构赋值时，实际上是在改变数组内部存储的值，因此会直接影响到原数组)。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>   <span class="token comment">// 定一个标志位</span>
    <span class="token comment">// 从0开始, 最后一个不用循环</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 从0开始循环(先排好的都在后面, 前面的都是待排序的,所以从0开始)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 交换位置</span>
                <span class="token keyword">const</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
                <span class="token comment">// [arr[j], arr[j+1]] = [arr[j+1], arr[j]]; // 等同于上方写法</span>
                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token comment">// 代表发生了位置交换</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token comment">// 如果在某趟排序后, 没有产生任何交换, 证明已经是有序的, 则直接结束排序;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>       <span class="token comment">// 如果这趟循环中产生有位置交换, 证明有位置变化, 则将标志位再次重置, 继续下一轮循环</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 测试功能</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="快速排序-o-n-logn"><a href="#快速排序-o-n-logn" class="header-anchor">#</a> 快速排序 o(n*logn)</h3> <p>要点:</p> <ol><li>取第1个作为中间值,  且循环必须从第2个开始</li> <li>大于中值的, 与小于中间值的各放一个数组</li> <li>用到递归: <strong>注意结束条件</strong>当数组为空或只有一个元素，则不需要进一步排序，直接返回数组结束</li></ol> <blockquote><p>console.time和console.timeEnd 这两个方法用来测量一个javascript脚本程序执行消耗的时间</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">quickSort1</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> median <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 取任意一个作为中间值</span>
    <span class="token keyword">const</span> min <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 小于中间值的存放数组(左侧)</span>
    <span class="token keyword">const</span> max <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 大于中间值的存放数组(右侧)</span>

    <span class="token comment">// 从1开始循环!!!</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断小于中间值的(这里 '&lt;'号 or '&gt;'号 决定了升降序)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> median<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            min<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            max<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">quickSort1</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">,</span> median<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">quickSort1</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 测试功能</span>
<span class="token comment">// console.time和console.timeEnd 这两个方法用来测量一个javascript脚本程序执行消耗的时间</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'quickSort1'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">quickSort1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'----------------=============='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'quickSort1'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="求数组中和为target的两个元素"><a href="#求数组中和为target的两个元素" class="header-anchor">#</a> 求数组中和为target的两个元素</h2> <blockquote><p>实现一个函数, 提供一个数组, 及一个target值,   返回和为target的两个元素, 如:   fn(nums,  3),  ===&gt; return [1, 2]</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">===</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> k<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>			
<span class="token punctuation">}</span>
<span class="token keyword">const</span> newArr2 <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fn: &quot;</span><span class="token punctuation">,</span> newArr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">findTwoNumbersThatSumToTarget</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> numIndices <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个空的对象用于存储数值及其对应的索引</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> complement <span class="token operator">=</span> target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 计算需要找到的另一个数</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>complement <span class="token keyword">in</span> numIndices<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 检查这个数是否已经在对象中(哈希表中)</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>complement<span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 如果在则返回这两个数的值</span>
        <span class="token punctuation">}</span>

        numIndices<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// 如果还在, 则将当前数作为key, 及其索引作为值, 存入对象中(哈希表中)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;没有找到这样的两个数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果没有找到这样的两个数，抛出错误或返回null</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试代码</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'findTwoNumbersThatSumToTarget'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">findTwoNumbersThatSumToTarget</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'findTwoNumbersThatSumToTarget'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="千分位格式化"><a href="#千分位格式化" class="header-anchor">#</a> 千分位格式化</h2> <blockquote><p>将这种数字 <code>1910020030405061</code>转换为 <code>1,910,020,030,405,061</code>, 第3位用逗号隔开,  有数组循环和字符串循环两种方式,</p> <p>推荐字符串循环(时间复杂度小)</p></blockquote> <h3 id="数组形式"><a href="#数组形式" class="header-anchor">#</a> 数组形式</h3> <p>思路解析:</p> <ol><li>将数字==&gt;string===&gt;Array, 并<strong>反转数组</strong>(需从末尾开始循环)</li> <li>利用reduce方法循环拼接</li> <li>循环中, 索引能被3整除代表是要加逗号(<strong>0除外</strong>),</li> <li>因数组反转, 拼接时注意顺序:  <strong>当前值 + 上次累加值</strong></li> <li>注意浮点数兼容</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @description 数字千分位处理--(数组形式)
 */</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">10020030405061</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">format1</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> str <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> idx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>idx <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> prev <span class="token operator">?</span> cur <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> prev <span class="token operator">:</span> cur<span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cur <span class="token operator">+</span> prev<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// const res = format1(num)</span>
<span class="token comment">// console.log('format1',res);</span>
</code></pre></div><h3 id="字符串形式"><a href="#字符串形式" class="header-anchor">#</a> 字符串形式</h3> <ul><li>按照字符长度, 从最后一个开始循环字符:  <code>length -1</code></li> <li>拼接逻辑与数组一致</li> <li><strong>!!!注意</strong>: 由于是没有反转, 字符是直接从length长度开始循环的, <strong>所有除余计算需要以从0开始的索引记录, 即:  <code>length-i-1</code></strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">1910020030405061</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">format2</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> str <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> val <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 也是从最后一个开始循环, 即length -1</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> j <span class="token operator">=</span> len <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment">// 与数组不同的是, 由于是没有反转, 字符是从length长度开始循环的, 所有除余计算需要从0开始, 即: length-i-1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            val <span class="token operator">=</span> val <span class="token operator">?</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> val <span class="token operator">:</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            val <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">format2</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'format2'</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="旋转数组k步"><a href="#旋转数组k步" class="header-anchor">#</a> 旋转数组K步</h2> <p>题目:</p> <blockquote><ul><li><p>输入一个数组[1,2,3,4,5,6,7]</p></li> <li><p>k=3, 既旋转3步</p></li> <li><p>应输出 [5,6,7,1,2,3,4]</p></li></ul></blockquote> <p>知识点:</p> <ol><li>两种方式: 一个是pop + unshift,  一种是 slice + cancat</li> <li>数组是一个有序结构(连续的内存空间),unshift操作非常慢.push是很快的</li> <li>slice方法不会改变原数组,  当start索引为负数如: <code>-k</code>,  则表示是从指倒从第k个开始截取, 直至最后一个</li> <li>旋转的步数需: 先根据长度取余(兼容k&gt;length的情况), 再取绝对值(兼容负数)</li></ol> <h3 id="旋转数组-k-步-使用pop-unshift"><a href="#旋转数组-k-步-使用pop-unshift" class="header-anchor">#</a> 旋转数组 k 步 - 使用pop unshift</h3> <blockquote><p><strong>循环k步</strong>,  原数组利用循环, 每次删除原数组的最后一个<code>pop</code>, 再推到新数组中的头部<code>unshift</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 旋转数组 k 步 - 使用pop unshift
 * 时间复杂度  O(n²) 空间复杂度O(1)
 * @param arr 
 * @param key 
 * @returns 
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">rotate1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">arr</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> arr<span class="token punctuation">.</span>length
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>key <span class="token operator">||</span> length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr
  <span class="token keyword">const</span> step <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>key <span class="token operator">%</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 旋转的步数需: 先根据长度取余(兼容k&gt;length的情况), 再取绝对值(兼容负数)</span>
  <span class="token comment">// 问:为啥只有一次for循环,不是O(n),而是 O(n²)</span>
  <span class="token comment">// 答:数组是一个有序结构(连续的内存空间),unshift操作非常慢.push是很快的</span>
  <span class="token comment">// 所以相当于是for循环一个n,unshfit一个n,所以是n^2</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> step<span class="token punctuation">;</span> a<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>
<span class="token keyword">const</span> testArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">rotate1</span><span class="token punctuation">(</span>testArr<span class="token punctuation">,</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="旋转数组-k-步-使用concat"><a href="#旋转数组-k-步-使用concat" class="header-anchor">#</a> 旋转数组 k 步 - 使用concat</h3> <blockquote><p><code>slice</code>切截取两个数组, <code>part1</code>截取到<code>-k</code>个(原后半段),  part截取从 <code>0 ~ k</code>个(原前半段), 最后两个合并返回</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 旋转数组k步 - 使用concat
 *  时间复杂度 O(1) 空间复杂度O(n)
 * @param arr 
 * @param key 
 * @returns 
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">rotate2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">arr</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> arr<span class="token punctuation">.</span>length
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>key <span class="token operator">||</span> length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr
  <span class="token keyword">const</span> step <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>key <span class="token operator">%</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//  slice方法不会改变原数组, 所以时间复杂度还是O(1);</span>
  <span class="token keyword">const</span> part1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 如当start索引为负数如: `-k`,  则表示是从指倒从第k个开始截取, 直至最后一个</span>
  <span class="token keyword">const</span> part2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">-</span> step<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>part1<span class="token punctuation">,</span> <span class="token operator">...</span>part2<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="单向链表"><a href="#单向链表" class="header-anchor">#</a> 单向链表</h2> <p>根据数组创建 单向链表</p> <blockquote><p>节点之间是通过一种指针(next/prev),  单向串联起来的,</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 根据数组创建 单向链表</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">linkedListFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> arr <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> curNode <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">val</span><span class="token operator">:</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token literal-property property">next</span><span class="token operator">:</span> nextNode
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> nextNode <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">val</span><span class="token operator">:</span> arr<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="翻转单项链表"><a href="#翻转单项链表" class="header-anchor">#</a> 翻转单项链表</h2> <p><strong>分析</strong></p> <blockquote><p>反转链表，画图很好理解。没有捷径，遍历一边，重新设置 next 指向即可。<br>
但实际写代码，却并不简单，很容易造成 nextNode 丢失。因此，遍历过程中，至少要存储 3 个指针 <code>prevNode</code> <code>curNode</code> <code>nextNode</code> <br>时间复杂度 <code>O(n)</code></p></blockquote> <p><strong>划重点</strong></p> <ul><li>链表和数组的不同, 内存占用、查询、新增、删除的效率</li> <li>如何保证 nextNode 不丢失</li></ul> <p><strong>连环问:链表和数组,那个实现队列更快</strong></p> <ul><li>数组是连续存储,push很快,shift很慢</li> <li>链表是非连续存储,add和delete都很快,但是查找很慢</li> <li><code>链表实现队列更快</code></li></ul> <p><strong>链表是先队列</strong></p> <ul><li>单项链表,但要同时记录head和tail</li> <li>要从tail入队,从head 出队,不然出队时tail不好定位</li> <li>eg:A-&gt;B-&gt;C-&gt;D-&gt;E  A为head E为tail</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ILinkListNode</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> number
  next<span class="token operator">?</span><span class="token operator">:</span> ILinkListNode
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 翻转单项链表,并返回翻转之后的 head node
 * 
 */</span>
 <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">reverseLinkList</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">listNode</span><span class="token operator">:</span>ILinkListNode</span><span class="token punctuation">)</span><span class="token operator">:</span>ILinkListNode<span class="token punctuation">{</span>
  <span class="token comment">// 定义三个指针</span>
  <span class="token keyword">let</span> <span class="token literal-property property">prevNode</span><span class="token operator">:</span>ILinkListNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span><span class="token keyword">undefined</span>
  <span class="token keyword">let</span> <span class="token literal-property property">curNode</span><span class="token operator">:</span>ILinkListNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span><span class="token keyword">undefined</span>
  <span class="token keyword">let</span> <span class="token literal-property property">nextNode</span><span class="token operator">:</span>ILinkListNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span>listNode

  <span class="token comment">// 以nextNode为主,遍历链表</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>nextNode<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 第一个元素,删掉next ,防止循环引用</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>curNode<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>prevNode<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// @ts-ignore</span>
      <span class="token keyword">delete</span> curNode<span class="token punctuation">.</span>next
    <span class="token punctuation">}</span>

    <span class="token comment">// 反转指针</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>curNode<span class="token operator">&amp;&amp;</span> prevNode<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// @ts-ignore</span>
      curNode<span class="token punctuation">.</span>next<span class="token operator">=</span>prevNode
    <span class="token punctuation">}</span>

    <span class="token comment">// 整体向后移动指针</span>
    prevNode<span class="token operator">=</span>curNode
    curNode<span class="token operator">=</span>nextNode
    nextNode<span class="token operator">=</span>nextNode<span class="token operator">?.</span>next
    
  <span class="token punctuation">}</span>
  <span class="token comment">// 最后一个的补充:当nextNode 为空时,此时curNode尚未设置next</span>
  curNode<span class="token operator">!</span><span class="token punctuation">.</span>next<span class="token operator">=</span>prevNode

  <span class="token keyword">return</span> curNode<span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="是否有效括号判断-利用栈先进后出"><a href="#是否有效括号判断-利用栈先进后出" class="header-anchor">#</a> 是否有效括号判断(利用栈先进后出)</h2> <blockquote><p>题目解析:</p> <ul><li><p>一个字符串s可能包含{}()[] 三种括号</p></li> <li><p>判断s是否是括号匹配的</p></li> <li><p>如(a{b}c)为匹配</p></li></ul></blockquote> <p><strong>栈</strong></p> <ul><li><p>先进后出</p></li> <li><p>API: <code>push pop length</code></p></li> <li><p>相关的:队列,堆</p></li></ul> <p><strong>逻辑结构 VS 物理结构</strong></p> <ul><li><p>栈和数组的关系就像是java和JavaScript的关系!</p></li> <li><p>栈,逻辑结构.理论模型,不管如何实现,不受任何语言的限制</p></li> <li><p>数组,物理结构.真实的功能实现,受限与编程语言</p></li></ul> <p><strong>解题思路</strong></p> <p>- 遇到左括号就压栈</p> <p>- 遇见右括号就判断栈顶,匹配就出栈</p> <p>- 最后判断length是否为0</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 判断字符串是否括号匹配</span>
<span class="token comment">/**
 * 时间复杂度O(n)  
 * 空间复杂度O(n)
 * @param str 
 * @returns 
 */</span>
<span class="token comment">// 功能测试</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;({[]})&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// const str = '{a(b[c]d)e}f';</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">matchBracket</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">matchBracket</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> str<span class="token punctuation">.</span>length
  <span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>

  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 

  <span class="token keyword">let</span> leftBrackets <span class="token operator">=</span> <span class="token string">'{(['</span>
  <span class="token keyword">let</span> rightBrackets <span class="token operator">=</span> <span class="token string">'})]'</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> s <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

    <span class="token comment">// 注 意 : 这里的includes的复杂度其实也是O(n),只不过他的数组是固定的,跟str参数无关,且很短</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>leftBrackets<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 左括号 压栈</span>
      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rightBrackets<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 右括号,判断站定是否匹配</span>
      <span class="token keyword">const</span> top <span class="token operator">=</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMatch</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
   
  <span class="token punctuation">}</span> 
  <span class="token keyword">return</span> stack<span class="token punctuation">.</span>length<span class="token operator">===</span><span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isMatch</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token string">'('</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">===</span> <span class="token string">')'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token string">'{'</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">===</span> <span class="token string">'}'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token string">'['</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">===</span> <span class="token string">']'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="异或运算符"><a href="#异或运算符" class="header-anchor">#</a> 异或运算符</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**异或运算符： ^
 * 位运算比较两个值，相同为0， 不同为1; 零和1以外的数字需转换为二进制后做每位比较(位运算比较), 得出值转换10进制为最终比较的结果
 * 三个特点：
 *        1. 0与任何值相比， 异或结果为这个任意值
 *        2. 满足交换率和结合率,
 *        3. 异或参与的多个数值连续运算的情况, 运算结果是一定的, 与顺序无关
 * 注意:
 *      异或实现交换时, 切记两个值不可是同一个内存地址
 */</span>

<span class="token comment">// 如下案例, 查找数组中唯一一个出现了奇数次的数字;</span>
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  num <span class="token operator">=</span> num <span class="token operator">^</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;通过异或运算得出:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> <span class="token string">&quot;出现的是奇数次&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.220fcdf5.js" defer></script><script src="/assets/js/2.778bb4ad.js" defer></script><script src="/assets/js/1.50b457b8.js" defer></script><script src="/assets/js/28.ff559d07.js" defer></script>
  </body>
</html>
