<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>路由懒加载的原理 | sansu-blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.9f84806b.css" as="style"><link rel="preload" href="/assets/js/app.c7b089c2.js" as="script"><link rel="preload" href="/assets/js/2.778bb4ad.js" as="script"><link rel="preload" href="/assets/js/1.50b457b8.js" as="script"><link rel="preload" href="/assets/js/28.7ade2bc0.js" as="script"><link rel="prefetch" href="/assets/js/10.325b9f09.js"><link rel="prefetch" href="/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/assets/js/12.ecdb524b.js"><link rel="prefetch" href="/assets/js/13.52087e05.js"><link rel="prefetch" href="/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/assets/js/16.85253907.js"><link rel="prefetch" href="/assets/js/17.c2838453.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/assets/js/21.33b300c9.js"><link rel="prefetch" href="/assets/js/22.b7c97fbe.js"><link rel="prefetch" href="/assets/js/23.7d067ebd.js"><link rel="prefetch" href="/assets/js/24.c7a7aa2a.js"><link rel="prefetch" href="/assets/js/25.c0c326b8.js"><link rel="prefetch" href="/assets/js/26.63ce4027.js"><link rel="prefetch" href="/assets/js/27.d28e8c45.js"><link rel="prefetch" href="/assets/js/29.667be9ed.js"><link rel="prefetch" href="/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/assets/js/30.1233ea5b.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/5.7098d77a.js"><link rel="prefetch" href="/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/assets/js/7.6a854e57.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f84806b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">sansu-blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/2020面试题1/" class="nav-link">
  2020面试题1
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题2/" class="nav-link">
  2020面试题2
</a></li><li class="dropdown-item"><!----> <a href="/interview/覆盘/" class="nav-link">
  覆盘
</a></li><li class="dropdown-item"><!----> <a href="/interview/性能优化/" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/interview/2023弱点复习/" class="nav-link">
  2023弱点复习
</a></li></ul></div></div><div class="nav-item"><a href="/document/index/" class="nav-link">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/R/" class="nav-link">
  R
</a></li><li class="dropdown-item"><!----> <a href="/react/React+nextjs访问星/" class="nav-link">
  React+nextjs访问星
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/syc-xiaosu03" target="_self" class="nav-link external">
  github
  <!----></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/2020面试题1/" class="nav-link">
  2020面试题1
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题2/" class="nav-link">
  2020面试题2
</a></li><li class="dropdown-item"><!----> <a href="/interview/覆盘/" class="nav-link">
  覆盘
</a></li><li class="dropdown-item"><!----> <a href="/interview/性能优化/" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/interview/2023弱点复习/" class="nav-link">
  2023弱点复习
</a></li></ul></div></div><div class="nav-item"><a href="/document/index/" class="nav-link">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/R/" class="nav-link">
  R
</a></li><li class="dropdown-item"><!----> <a href="/react/React+nextjs访问星/" class="nav-link">
  React+nextjs访问星
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/syc-xiaosu03" target="_self" class="nav-link external">
  github
  <!----></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>路由懒加载的原理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/%E8%A6%86%E7%9B%98.html#测试题" class="sidebar-link">测试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/%E8%A6%86%E7%9B%98.html#_1-手写数组去重3种实现方案" class="sidebar-link">1. 手写数组去重3种实现方案</a></li><li class="sidebar-sub-header"><a href="/interview/%E8%A6%86%E7%9B%98.html#_2-手写排序的几种算法-最好能写出快排-及讲述sort-方法的实现原理" class="sidebar-link">2. 手写排序的几种算法(最好能写出快排)， 及讲述sort()方法的实现原理</a></li><li class="sidebar-sub-header"><a href="/interview/%E8%A6%86%E7%9B%98.html#_3-输出打印的内容" class="sidebar-link">3. 输出打印的内容</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="路由懒加载的原理"><a href="#路由懒加载的原理" class="header-anchor">#</a> 路由懒加载的原理</h3> <p><strong><code>__webpack_require__.e</code>方法是实现懒加载的核心</strong>，在这个方法里面处理了三件事情。</p> <ul><li>使用JSONP模式加载路由对应的js文件，也可以称为chunk。</li> <li>设置chunk加载的三种状态并缓存在<code>installedChunks</code>中，防止chunk重复加载。</li> <li>处理chunk加载超时和加载出错的场景。</li></ul> <h3 id="从输入url到获得页面经历的所有事情-越细越好"><a href="#从输入url到获得页面经历的所有事情-越细越好" class="header-anchor">#</a> 从输入url到获得页面经历的所有事情(越细越好)</h3> <p>https://juejin.cn/post/6844903784229896199</p> <ul><li><p>域名解析</p></li> <li><p>tcp3次握手建立连接</p> <blockquote><p>过程</p></blockquote></li> <li><p>发送请求报文</p></li> <li><p>获取数据</p></li> <li><p>根据数据渲染页面</p> <blockquote><p>前端页面过程</p> <p>js执行过程</p> <ul><li>语法检测</li> <li>预解析阶段(变量及函数提升)</li> <li>执行阶段</li></ul></blockquote></li> <li><p>top4次挥手断开连接</p> <blockquote><p>过程</p></blockquote></li></ul> <h3 id="什么是tcp连接"><a href="#什么是tcp连接" class="header-anchor">#</a> 什么是tcp连接</h3> <p>TCP是一种面向连接的单播协议，在发送数据前，通信双方必须在彼此间建立一条连接。所谓的“连接”，其实是客户端和服务器的内存里保存的一份关于对方的信息，如ip地址、端口号等。</p> <p>TCP可以看成是一种字节流，它会处理IP层或以下的层的丢包、重复以及错误问题。在连接的建立过程中，双方需要交换一些连接的参数。这些参数可以放在TCP头部。</p> <p>TCP提供了一种可靠、面向连接、字节流、传输层的服务，采用三次握手建立一个连接。采用4次挥手来关闭一个连接。</p> <h5 id="什么是-3次握手"><a href="#什么是-3次握手" class="header-anchor">#</a> 什么是“3次握手”</h5> <p>客户端和服务端通信前要进行连接，“3次握手”的作用就是<code>双方都能明确自己和对方的收、发能力是正常的</code>。</p> <p><code>第一次握手</code>：客户端发送网络包，服务端收到了。这样<strong>服务端就能得出</strong>结论：<strong>客户端的发送能力、服务端的接收能力是正常的</strong>。</p> <p><code>第二次握手</code>：服务端发包，客户端收到了。这样<strong>客户端就能得出结论</strong>：<strong>服务端的接收、发送能力，客户端的接收、发送能力是正常的</strong>。
从客户端的视角来看，我接到了服务端发送过来的响应数据包，说明服务端接收到了我在第一次握手时发送的网络包，并且成功发送了响应数据包，这就说明，服务端的接收、发送能力正常。而另一方面，我收到了服务端的响应数据包，说明我第一次发送的网络包成功到达服务端，这样，我自己的发送和接收能力也是正常的。</p> <p><code>第三次握手</code>：客户端发包，服务端收到了。这样<strong>服务端就能得出</strong>结论：<strong>客户端的接收、发送能力，服务端的发送、接收能力是正常的</strong>。
第一、二次握手后，服务端并不知道客户端的接收能力以及自己的发送能力是否正常。而在第三次握手时，服务端收到了客户端对第二次握手作的回应。从服务端的角度，我在第二次握手时的响应数据发送出去了，客户端接收到了。所以，我的发送能力是正常的。而客户端的接收能力也是正常的。</p> <p>经历了上面的三次握手过程，客户端和服务端都确认了自己的接收、发送能力是正常的。之后就可以正常通信了。</p> <p>每次都是接收到数据包的一方可以得到一些结论，发送的一方其实没有任何头绪。我虽然有发包的动作，但是我怎么知道我有没有发出去，而对方有没有接收到呢？</p> <blockquote><p>客户端发送一个带 SYN=1，Seq=X 的数据包到服务器端口<code>（第一次握手，由浏览器发起，告诉服务器我要发送请求了）</code></p> <p>服务器发回一个带 SYN=1， ACK=X+1， Seq=Y 的响应包以示传达确认信息<code>（第二次握手，由服务器发起，告诉浏览器我准备接受了，你赶紧发送吧）</code></p> <p>客户端再回传一个带 ACK=Y+1， Seq=Z 的数据包，代表“握手结束”<code>（第三次握手，由浏览器发送，告诉服务器，我马上就发了，准备接受吧）</code></p></blockquote> <h5 id="什么是-4次挥手"><a href="#什么是-4次挥手" class="header-anchor">#</a> 什么是“4次挥手”</h5> <p>TCP连接是双向传输的对等的模式，就是说双方都可以同时向对方发送或接收数据。当有一方要关闭连接时，会发送指令告知对方，我要关闭连接了。这时对方会回一个ACK，此时一个方向的连接关闭。但是另一个方向仍然可以继续传输数据，等到发送完了所有的数据后，会发送一个FIN段来关闭此方向上的连接。接收方发送ACK确认关闭连接。注意，接收到FIN报文的一方只能回复一个ACK, 它是无法马上返回对方一个FIN报文段的，因为结束数据传输的“指令”是上层应用层给出的，我只是一个“搬运工”，我无法了解“上层的意志”。</p> <ul><li>tcp第二次握手失败什么产生什么结果</li> <li>tcp4第4次挥手，具体做了什么</li></ul> <blockquote><p>发起方向被动方发送报文，Fin、Ack、Seq，表示已经没有数据传输了。并进入 FIN_WAIT_1 状态。 <strong><code>(第一次挥手：由浏览器发起的，发送给服务器，我请求报文发送完了，你准备关闭吧)</code></strong></p> <p>被动方发送报文，Ack、Seq，表示同意关闭请求。此时主机发起方进入 FIN_WAIT_2 状态。 <strong><code>(第二次挥手：由服务器发起的，告诉浏览器，我请求报文接受完了，我准备关闭了，你也准备吧)</code></strong></p> <p>被动方向发起方发送报文段，Fin、Ack、Seq，请求关闭连接。并进入 LAST_ACK 状态。 <strong><code>(第三次挥手：由服务器发起，告诉浏览器，我响应报文发送完了，你准备关闭吧)</code></strong></p> <p>发起方向被动方发送报文段，Ack、Seq。然后进入等待 TIME_WAIT 状态。被动方收到发起方的报文段以后关闭连接。发起方等待一定时间未收到回复，则正常关闭。 <strong><code>(第四次挥手：由浏览器发起，告诉服务器，我响应报文接受完了，我准备关闭了，你也准备吧)</code></strong></p></blockquote> <h3 id="http及请求报文与响应报文"><a href="#http及请求报文与响应报文" class="header-anchor">#</a> http及请求报文与响应报文</h3> <h4 id="_1-http请求的基本概念"><a href="#_1-http请求的基本概念" class="header-anchor">#</a> 1，HTTP请求的基本概念</h4> <p>HTTP协议（HyperText Transfer Protocol，超文本传输协议）是因特网上应用最为广泛的一种网络传输协议，所有的WWW文件都必须遵守这个标准。是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。 HTTP是一个应用层协议，由请求和响应构成；</p> <ul><li>工作原理：HTTP协议工作于客户端—服务端架构上。<strong>浏览器</strong>(作为HTTP客户端) <strong>通过URL</strong>向<strong>HTTP服务端</strong>—发送所有请求</li> <li>Web服务器有：Apache服务器，IIS服务器（Internet Information Services）等。
Web服务器根据接收到的请求后，向客户端发送响应信息。
HTTP默认端口号为80，但是你也可以改为8080或者其他端口。</li> <li><strong>HTTP三点注意事项</strong>：HTTP是无连接; HTTP是媒体独立的; HTTP是无状态(无状态是指协议对于事务处理没有记忆能力。);</li></ul> <h4 id="_2-http请求头和响应头的含义"><a href="#_2-http请求头和响应头的含义" class="header-anchor">#</a> 2，HTTP请求头和响应头的含义</h4> <p><strong>请求头</strong>：</p> <ul><li><p>Accept: text/html,image/*( 浏览器可以接收的类型)</p></li> <li><p>Accept-Charset: ISO-8859-1(浏览器可以接收的编码类型)</p></li> <li><p>Accept-Encoding: gzip,compress(浏览器可以接收压缩编码类型)</p></li> <li><p>Accept-Language: en-us,zh-cn(浏览器可以接收的语言和国家类型)</p></li> <li><p>Host: www.it315.org:80(浏览器请求的主机和端口)</p></li> <li><p>If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT(某个页面缓存时间)</p></li> <li><p>Referer: http://www.it315.org/index. jsp(请求来自于哪个页面)</p></li> <li><p>User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0)(浏览器相关信息)</p></li> <li><p>Cookie：(浏览器暂存服务器发送的信息)</p></li> <li><p>Connection: close(1.0)/Keep-Alive(1.1)(HTTP请求的版本的特点)</p> <blockquote><p>表示是否需要持久连接。如果web服务器端看到这里的值为“Keep-Alive”，或者看到请求使用的是HTTP 1.1（HTTP 1.1默认进行持久连接），它就可以利用持久连接的优点，当页面包含多个元素时（例如Applet，图片），显著地减少下载所需要的时间。要实现这一点， web服务器需要在返回给客户端HTTP头信息中发送一个Content-Length（返回信息正文的长度）头，最简单的实现方法是：先把内容写入ByteArrayOutputStream，然 后在正式写出内容之前计算它的大小。</p></blockquote></li> <li><p>Date: Tue, 11 Jul 2000 18:23:51 GMT(请求网站的时间)</p></li> <li><p>Connection ：</p></li> <li><p>Content-Length : 请求头的长度。</p></li> <li><p>Content-Type : 显示此HTTP请求提交的内容类型。一般只有post提交时才需要设置该属性。</p></li></ul> <p><strong>响应头：</strong></p> <ul><li>Location: http://www.it315.org/index.jsp(控制浏览器显示哪个页面)</li> <li>Server:apache tomcat(服务器的类型)</li> <li>Content-Encoding: gzip(服务器发送的压缩编码方式)</li> <li>Content-Length: 80(服务器发送显示的字节码长度)</li> <li>Content-Language: zh-cn(服务器发送内容的语言和国家名)</li> <li>Content-Type: image/jpeg; charset=UTF-8(服务器发送内容的类型和编码类型)</li> <li>Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT(服务器最后一次修改的时间)</li> <li>Refresh: 1;url=http://www.it315.org(控制浏览器1秒钟后转发URL所指向的页面)</li> <li>Content-Disposition: attachment; filename=aaa.jpg(服务器控制浏览器发下载方式打开文件)</li> <li>Transfer-Encoding: chunked(服务器分块传递数据到客户端）</li> <li>Set-Cookie:SS=Q0=5Lb_nQ; path=/search(服务器发送Cookie相关的信息)</li> <li>Expires: -1(服务器控制浏览器不要缓存网页，默认是缓存)</li> <li>Cache-Control: no-cache(服务器控制浏览器不要缓存网页)</li> <li>Pragma: no-cache(服务器控制浏览器不要缓存网页)</li> <li>Connection: close/Keep-Alive(HTTP请求的版本的特点)</li> <li>Date: Tue, 11 Jul 2000 18:23:51 GMT(响应网站的时间)</li></ul> <h3 id="状态码-200-300-400-500等有哪些常用的状态码"><a href="#状态码-200-300-400-500等有哪些常用的状态码" class="header-anchor">#</a> 状态码， 200+,  300+,  400+, 500等有哪些常用的状态码</h3> <h3 id="jquery的原理及为何可以链式调用"><a href="#jquery的原理及为何可以链式调用" class="header-anchor">#</a> jquery的原理及为何可以链式调用</h3> <h3 id="sass-less的使用"><a href="#sass-less的使用" class="header-anchor">#</a> sass/less的使用</h3> <h3 id="数组方法-哪些修改自身-哪些有返回值"><a href="#数组方法-哪些修改自身-哪些有返回值" class="header-anchor">#</a> 数组方法，哪些修改自身，哪些有返回值</h3> <h3 id="map与-foreach-filter的不同"><a href="#map与-foreach-filter的不同" class="header-anchor">#</a> map与 forEach，filter的不同</h3> <h3 id="数组与类数组的不同"><a href="#数组与类数组的不同" class="header-anchor">#</a> 数组与类数组的不同</h3> <h3 id="类数组转换为数组的方式"><a href="#类数组转换为数组的方式" class="header-anchor">#</a> 类数组转换为数组的方式</h3> <blockquote><ul><li>Array.prototype.slice.call( 类数组 )</li> <li>【 ... 类数组 】</li> <li>Array.form( )</li></ul></blockquote> <h3 id="跨域的方式"><a href="#跨域的方式" class="header-anchor">#</a> 跨域的方式</h3> <blockquote><ul><li>script, img, link, iframe等标签</li> <li>jsonp</li> <li>cors</li> <li>postMessage</li> <li>webpack--&gt;proxy</li></ul></blockquote> <h2 id="测试题"><a href="#测试题" class="header-anchor">#</a> 测试题</h2> <h3 id="_1-手写数组去重3种实现方案"><a href="#_1-手写数组去重3种实现方案" class="header-anchor">#</a> 1. 手写数组去重3种实现方案</h3> <h3 id="_2-手写排序的几种算法-最好能写出快排-及讲述sort-方法的实现原理"><a href="#_2-手写排序的几种算法-最好能写出快排-及讲述sort-方法的实现原理" class="header-anchor">#</a> 2. 手写排序的几种算法(最好能写出快排)， 及讲述sort()方法的实现原理</h3> <h3 id="_3-输出打印的内容"><a href="#_3-输出打印的内容" class="header-anchor">#</a> 3. 输出打印的内容</h3> <p><strong>题1：</strong>  考察js预编译</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    a <span class="token operator">=</span> <span class="token string">&quot;a1&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>**题3：**for循环中使用setTimeout的方式</p> <p>写出输出的内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果想要输出1，2，3，4，5，有几种解决方案</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 使用闭包</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> j <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> j<span class="token operator">*</span><span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2 使用let</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3 借用setTimeout的第三个参数</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>题3：</strong></p> <p>考察事件循环，是否能分辨微任务与宏任务，及两种异步任务的执行时机</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 题1：</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'children2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'children3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'children4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'children5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'children6'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'children7'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 请写出打印的内容顺序： </span>
</code></pre></div><p><strong>题4：</strong></p> <p>考察事件循环包含async及await的掌握</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>  
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>
<span class="token comment">// 请写出打印的内容顺序： </span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c7b089c2.js" defer></script><script src="/assets/js/2.778bb4ad.js" defer></script><script src="/assets/js/1.50b457b8.js" defer></script><script src="/assets/js/28.7ade2bc0.js" defer></script>
  </body>
</html>
