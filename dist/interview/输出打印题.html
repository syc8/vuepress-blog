<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sansu-blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.9f84806b.css" as="style"><link rel="preload" href="/assets/js/app.220fcdf5.js" as="script"><link rel="preload" href="/assets/js/2.778bb4ad.js" as="script"><link rel="preload" href="/assets/js/1.50b457b8.js" as="script"><link rel="preload" href="/assets/js/32.84503ad3.js" as="script"><link rel="prefetch" href="/assets/js/10.325b9f09.js"><link rel="prefetch" href="/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/assets/js/12.ecdb524b.js"><link rel="prefetch" href="/assets/js/13.52087e05.js"><link rel="prefetch" href="/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/assets/js/16.85253907.js"><link rel="prefetch" href="/assets/js/17.c2838453.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/assets/js/21.33b300c9.js"><link rel="prefetch" href="/assets/js/22.b7c97fbe.js"><link rel="prefetch" href="/assets/js/23.3fe4f4e7.js"><link rel="prefetch" href="/assets/js/24.1b1a526d.js"><link rel="prefetch" href="/assets/js/25.c0c326b8.js"><link rel="prefetch" href="/assets/js/26.d196432d.js"><link rel="prefetch" href="/assets/js/27.0237ff6e.js"><link rel="prefetch" href="/assets/js/28.ff559d07.js"><link rel="prefetch" href="/assets/js/29.8ea4d81b.js"><link rel="prefetch" href="/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/assets/js/30.eb86d065.js"><link rel="prefetch" href="/assets/js/31.a0ccb169.js"><link rel="prefetch" href="/assets/js/33.ac4015e6.js"><link rel="prefetch" href="/assets/js/34.96388a70.js"><link rel="prefetch" href="/assets/js/35.69d0b815.js"><link rel="prefetch" href="/assets/js/36.467f6d59.js"><link rel="prefetch" href="/assets/js/37.63d0c8ba.js"><link rel="prefetch" href="/assets/js/38.b62fd785.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/5.7098d77a.js"><link rel="prefetch" href="/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/assets/js/7.6a854e57.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f84806b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">sansu-blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/2023专项复习/" class="nav-link">
  2023专项复习
</a></li><li class="dropdown-item"><!----> <a href="/interview/手写题/" class="nav-link">
  手写题
</a></li><li class="dropdown-item"><!----> <a href="/interview/输出打印题/" class="nav-link">
  输出打印题
</a></li><li class="dropdown-item"><!----> <a href="/interview/虚拟列表/" class="nav-link">
  虚拟列表
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题1/" class="nav-link">
  2020面试题1
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题2/" class="nav-link">
  2020面试题2
</a></li><li class="dropdown-item"><!----> <a href="/interview/覆盘/" class="nav-link">
  覆盘
</a></li><li class="dropdown-item"><!----> <a href="/interview/性能优化/" class="nav-link">
  性能优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">微信小程序</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">微信小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wechatmini/小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/01小程序_技术选型.html" class="nav-link">
  01小程序技术选型
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/02微信小程序-系统实践学习.html" class="nav-link">
  02原生微信小程序实践
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/WePY - 快速开发小程序.html" class="nav-link">
  WePY快速开发
</a></li></ul></div></div><div class="nav-item"><a href="/document/index/" class="nav-link">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/R/" class="nav-link">
  R
</a></li><li class="dropdown-item"><!----> <a href="/react/React+nextjs访问星/" class="nav-link">
  React+nextjs访问星
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/syc-xiaosu03" target="_self" class="nav-link external">
  github
  <!----></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/2023专项复习/" class="nav-link">
  2023专项复习
</a></li><li class="dropdown-item"><!----> <a href="/interview/手写题/" class="nav-link">
  手写题
</a></li><li class="dropdown-item"><!----> <a href="/interview/输出打印题/" class="nav-link">
  输出打印题
</a></li><li class="dropdown-item"><!----> <a href="/interview/虚拟列表/" class="nav-link">
  虚拟列表
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题1/" class="nav-link">
  2020面试题1
</a></li><li class="dropdown-item"><!----> <a href="/interview/2020面试题2/" class="nav-link">
  2020面试题2
</a></li><li class="dropdown-item"><!----> <a href="/interview/覆盘/" class="nav-link">
  覆盘
</a></li><li class="dropdown-item"><!----> <a href="/interview/性能优化/" class="nav-link">
  性能优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">微信小程序</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">微信小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wechatmini/小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/01小程序_技术选型.html" class="nav-link">
  01小程序技术选型
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/02微信小程序-系统实践学习.html" class="nav-link">
  02原生微信小程序实践
</a></li><li class="dropdown-item"><!----> <a href="/wechatmini/WePY - 快速开发小程序.html" class="nav-link">
  WePY快速开发
</a></li></ul></div></div><div class="nav-item"><a href="/document/index/" class="nav-link">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/R/" class="nav-link">
  R
</a></li><li class="dropdown-item"><!----> <a href="/react/React+nextjs访问星/" class="nav-link">
  React+nextjs访问星
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/syc-xiaosu03" target="_self" class="nav-link external">
  github
  <!----></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/%E8%BE%93%E5%87%BA%E6%89%93%E5%8D%B0%E9%A2%98.html#原型链经典面试题" class="sidebar-link">原型链经典面试题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/interview/%E8%BE%93%E5%87%BA%E6%89%93%E5%8D%B0%E9%A2%98.html#_1-2-3-map-parseint" class="sidebar-link">['1','2','3'].map(parseInt)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/%E8%BE%93%E5%87%BA%E6%89%93%E5%8D%B0%E9%A2%98.html#parseint" class="sidebar-link">parseInt：</a></li></ul></li><li><a href="/interview/%E8%BE%93%E5%87%BA%E6%89%93%E5%8D%B0%E9%A2%98.html#事件循环考察async-await" class="sidebar-link">事件循环考察async await</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/%E8%BE%93%E5%87%BA%E6%89%93%E5%8D%B0%E9%A2%98.html#第一题执行结果" class="sidebar-link">第一题执行结果</a></li><li class="sidebar-sub-header"><a href="/interview/%E8%BE%93%E5%87%BA%E6%89%93%E5%8D%B0%E9%A2%98.html#如果将async1-变成await-执行结果会有不同" class="sidebar-link">如果将async1(), 变成await，执行结果会有不同</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>(答案可去2023专项复习最后面查找)</p> <h2 id="原型链经典面试题"><a href="#原型链经典面试题" class="header-anchor">#</a> 原型链经典面试题</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @description 原型链经典面试题
 * 以下为主进程代码
 */</span>

 <span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> <span class="token keyword">this</span>
 <span class="token punctuation">}</span>
 Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token comment">//说出下面的结果</span>
 Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">00</span>
 <span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_1-2-3-map-parseint"><a href="#_1-2-3-map-parseint" class="header-anchor">#</a> ['1','2','3'].map(parseInt)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这⾥会打印出什么呢? </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> result <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="parseint"><a href="#parseint" class="header-anchor">#</a> parseInt：</h3> <p><strong>从给定的字符串中解析出的一个整数</strong>, 两个参数， str: 解析的字符串，radix: ⼏进制</p> <ul><li>radix若省略或为0，则以10进⾏解析，若⼩于2或者⼤于36，则返回NaN</li> <li>意思是将 str 当作是 radix参数指定进制数解析， 并返回成十进制数</li> <li>进制总共有7种， 包括有：十、二、四、七、八、十二、十六进制</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> radix<span class="token punctuation">)</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 代表将'123'看作 5 进制数，返回十进制数 38 =&gt; 1*5^2 + 2*5^1 + 3*5^0 = 38</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执⾏过程：</span>
<span class="token comment">// parseInt('1', 0) -&gt; 1     parseInt() 会根据十进制来解析，所以结果为 1；</span>
<span class="token comment">// parseInt('2', 1) -&gt; NaN   超出区间范围，所以结果为 NaN；</span>
<span class="token comment">// parseInt('3', 2) -&gt; 2     用2进制来解析，应以 0 和 1 开头，所以结果为 NaN</span>


<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执⾏过程：</span>
<span class="token comment">// parseInt('1', 0) -&gt; 1</span>
<span class="token comment">// parseInt('3', 1) -&gt; NaN</span>
<span class="token comment">// parseInt('10', 2) -&gt; 2				// 将'10'看作为 2 进制数，转为十进制数则为 2</span>
</code></pre></div><h2 id="事件循环考察async-await"><a href="#事件循环考察async-await" class="header-anchor">#</a> 事件循环考察async await</h2> <ul><li>await上面的代码是同步</li> <li>await右边的代码如果不是一个异步函数，<strong>是普通函数，会立即执行</strong></li> <li><strong>await左边的及下面的代码会被阻塞</strong>，会暂停将当前产生的同步代码执行完后再往下</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'async1 start'</span> <span class="token punctuation">)</span>  	<span class="token comment">// 同步代码，立即执行</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			<span class="token comment">//  async2() === Promise.resolve(undefined).then((undefined) =&gt; {})</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'async1 end'</span> <span class="token punctuation">)</span>		<span class="token comment">// await左边的及下面的代码会被暂停执行</span>
<span class="token punctuation">}</span>
<span class="token comment">// async1()内部, 由于async2()其实是返回一个Promise, await async2()相当于获取它的值，其实就相当于这段代码Promise.resolve(undefined).then((undefined) =&gt; {}),所以.then会被推入微任务队列, 虽然这个.then后面不会有任何打印，但是会执行</span>
</code></pre></div><h4 id="重点-当-async-函数执行-await-表达式时-函数会暂停执行"><a href="#重点-当-async-函数执行-await-表达式时-函数会暂停执行" class="header-anchor">#</a> <strong>重点： 当 async 函数执行 <code>await</code> 表达式时，函数会暂停执行</strong>，</h4> <p>之后的执行顺序是： 旧版浏览器的顺序是： 1--2-- 3，  新版浏览器的顺序是： 1--3--2</p> <blockquote><ol><li><strong>剩下的主进程代码</strong>,  2. <strong>已产生的微任务</strong>,  3, <strong>恢复async函数中await后面的代码执行</strong></li></ol></blockquote> <ol><li>事件循环将当前任务队列中的剩余任务执行完毕。</li> <li>事件循环执行任务队列中已产生的异步微任务，这将恢复 async 函数的执行。</li> <li>async 函数继续执行await后面的代码。</li></ol> <blockquote><ol><li>当 async 函数执行 <code>await</code> 表达式时，函数暂停执行。</li> <li>事件循环将当前任务队列中的剩余任务执行完毕。</li> <li>事件循环检查事件队列，并将 Promise 结算事件添加到任务队列。</li> <li>当 Promise 解决时，事件循环会将结算事件移至任务队列。</li> <li>事件循环执行任务队列中的结算事件，这将恢复 async 函数的执行。</li> <li>async 函数继续执行，并使用 Promise 解决的值。</li></ol></blockquote> <p>请给出下面这段代码的执行结果， 并写出分析过程； 如果在 async1() 改为 await async1() ，执行结果会改变吗？为什么？Async/Await 输出题解答参考</p> <div class="language- extra-class"><pre class="language-text"><code>setTimeout(function() {
    console.log('setTimeout 1');
    new Promise(function(resolve) {
        console.log('promise 1');
        resolve();
    }).then(function() {
        console.log('promise then')
    })
})
async function async1() {
    console.log( 'async1 start' )
    await async2();			// `await async2()`相当于获取它的值，其实就相当于这段代码`Promise.resolve(undefined).then((undefined) =&gt; {})`,所以`.then`会被推入微任务队列, 这里这个`.then`不会有任何打印，但是会执行
    console.log( 'async1 end' )
    await async3();
}

async function async2() {
    console.log( 'async2' )
}

async function async3() {
    console.log( 'async3' )
}

console.log('eventLoop');
async1();
new Promise(function(resolve) {
    console.log('promise 2');
    resolve();
}).then(function() {
    console.log('promise2 then')
});

new Promise(function(resolve) {
    console.log('promise 4');
    resolve();
}).then(function() {
    console.log('promise4 then')
});
console.log('eventLoop end');
// 执行  eventLoop | eventLoop end | async1 start | 'promise 2'| promise 4' | async2 | async1 end | promise2 then | promise4 then | async3 setTimeout 1  promise 1 promise then
// 微任务     | 
// 宏任务  set1
</code></pre></div><h3 id="第一题执行结果"><a href="#第一题执行结果" class="header-anchor">#</a> 第一题执行结果</h3> <blockquote><p>执行主程序代码：</p> <ul><li><p>settimeout挂起到宏任务队列</p></li> <li><p>打印**（eventLoop）**</p></li> <li><p>执行async1  打印**（async1 start）及（async2）** 遇到await等待跳出？</p></li> <li><p>执行new promise, 打印**（promise 2）**， 挂起.then到微任务队列？</p></li> <li><p>再执行第二个new promise, 打印**（promise 4）**， 挂起.then到微任务队列？</p></li> <li><p>打印**（eventLoop end）**</p></li> <li><p>此时其它代码执行完毕后，</p></li> <li><p>回到async1函数去执行剩下的代码，先打印**(async1 end)** 接着执行async3，打印**（async3）**</p></li></ul> <p>执行产生的微任务</p> <ul><li>执行第一个.then微任务 打印**（promise2 then）**</li> <li>执行第二个.then微任务 打印**（promise4 then）**</li></ul> <p>执行宏任务</p> <ul><li>执行setTimeout，</li> <li>打印(setTimeout 1)</li> <li>打印（promise 1）</li> <li>遇到.then产生微任务</li> <li>执行.then微任务，打印(promise then)</li></ul></blockquote> <p>最终结果是：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>eventLoop
async1 start
async2
promise <span class="token number">2</span>
promise <span class="token number">4</span>
eventLoop end
async1 end
async3
promise2 <span class="token keyword">then</span>
promise4 <span class="token keyword">then</span>
setTimeout <span class="token number">1</span>
promise <span class="token number">1</span>
promise <span class="token keyword">then</span>
</code></pre></div><h3 id="如果将async1-变成await-执行结果会有不同"><a href="#如果将async1-变成await-执行结果会有不同" class="header-anchor">#</a> 如果将async1(), 变成await，执行结果会有不同</h3> <blockquote><p>原因：遇到await的时候，会阻塞后面的代码，会将当前async1产生的同步代码执行完后再往下，所以会先打印 <strong>（async1 end）</strong>、  <strong>（async3）</strong>   再打印**（promise 2）** 、<strong>（promise 4）</strong>、 **（eventLoop end）**其它的不变，最终顺序是：</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>eventLoop
async1 start
async2
async1 end
async3
promise <span class="token number">2</span>
promise <span class="token number">4</span>
eventLoop end
promise2 <span class="token keyword">then</span>
promise4 <span class="token keyword">then</span>
setTimeout <span class="token number">1</span>
promise <span class="token number">1</span>
promise <span class="token keyword">then</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.220fcdf5.js" defer></script><script src="/assets/js/2.778bb4ad.js" defer></script><script src="/assets/js/1.50b457b8.js" defer></script><script src="/assets/js/32.84503ad3.js" defer></script>
  </body>
</html>
